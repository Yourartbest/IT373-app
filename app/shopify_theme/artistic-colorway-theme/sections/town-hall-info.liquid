<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<section id="town-hall" class="section section--{{ section.settings.section_width }} color-{{ section.settings.color_scheme }} spacing-style" style="{% render 'spacing-style', settings: section.settings %}">
    <header class="section-header">
      <h2 class="section-title">{{ section.settings.title }}</h2>
      {% if section.settings.subtitle != blank %}
        <p class="section-subtitle">{{ section.settings.subtitle }}</p>
      {% endif %}
    </header>

    <div class="town-hall-grid grid">
      <article class="card town-hall-details">
        <div class="card__body">
          <p><strong>Date:</strong> {{ section.settings.date }}</p>
          <p><strong>Time:</strong> {{ section.settings.time }}</p>
          <p><strong>Location:</strong> {{ section.settings.location }}</p>
          {% if section.settings.virtual_link != blank %}
            <p><strong>Virtual:</strong> <a href="{{ section.settings.virtual_link }}" class="text-accent">Join online</a></p>
          {% endif %}
        </div>
      </article>

      <article class="card town-hall-description">
        <div class="card__body">
          {{ section.settings.description }}
        </div>
      </article>
    </div>

    {% if section.blocks.size > 0 %}
      <div class="agenda section">
        <h3>Agenda</h3>
        <div class="grid">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'agenda_item' %}
                <div class="card agenda-item" {{ block.shopify_attributes }}>
                  <div class="card__body">
                    {% if block.settings.time != blank %}
                      <p class="muted" style="margin:0 0 6px;">{{ block.settings.time }}</p>
                    {% endif %}
                    <h4 class="card__title" style="margin:0 0 6px;">{{ block.settings.title }}</h4>
                    <p class="card__text">{{ block.settings.note }}</p>
                  </div>
                </div>
            {% endcase %}
          {% endfor %}
        </div>
      </div>
    {% endif %}
</section>

{% schema %}
{
  "name": "Town Hall Info",
  "settings": [
    { "type": "select", "id": "section_width", "label": "Width", "options": [ { "value": "page-width", "label": "Page width" }, { "value": "full-width", "label": "Full width" } ], "default": "page-width" },
  { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "range", "id": "padding-block-start", "label": "Top padding", "min": 0, "max": 100, "step": 1, "unit": "px", "default": 32 },
    { "type": "range", "id": "padding-block-end", "label": "Bottom padding", "min": 0, "max": 100, "step": 1, "unit": "px", "default": 32 },
    { "type": "text", "id": "title", "label": "Title", "default": "ForgeFix Town Hall" },
    { "type": "text", "id": "subtitle", "label": "Subtitle", "default": "Monthly community Q&A, demos, and tips" },
    { "type": "text", "id": "date", "label": "Date", "default": "First Tuesday of each month" },
    { "type": "text", "id": "time", "label": "Time", "default": "6:00 PM â€“ 7:30 PM (local)" },
    { "type": "text", "id": "location", "label": "Location", "default": "Remote (Online)" },
    { "type": "url", "id": "virtual_link", "label": "Virtual Meeting Link" },
    { "type": "richtext", "id": "description", "label": "Description", "default": "<p>Join our monthly town hall for live troubleshooting, firmware tuning tips, and Q&A for niche 3D printers.</p>" },
    { "type": "checkbox", "id": "show_cta", "label": "Show Call To Action", "default": true },
    { "type": "text", "id": "cta_text", "label": "CTA Text", "default": "RSVP" },
    { "type": "url", "id": "cta_link", "label": "CTA Link" }
  ],
  "blocks": [
    {
      "type": "agenda_item",
      "name": "Agenda item",
      "settings": [
        { "type": "text", "id": "time", "label": "Time" },
        { "type": "text", "id": "title", "label": "Title", "default": "Welcome & Updates" },
        { "type": "text", "id": "note", "label": "Note", "default": "Announcements and recent fixes" }
      ]
    }
  ],
  "presets": [
    { "name": "Town Hall Info" }
  ]
}
{% endschema %}
